(function(i,t){var e=e||{};typeof e=="function"&&e.amd?e([],t):typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof exports=="object"?exports.FakeScroll=t():i.FakeScroll=t()})(this,function(){raf=window.requestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function i(t,e){t&&(this.settings=Object.assign({},this.defaults,e||{}),this.state={},this.listeners={},this.DOM=this.build(t),this.events.binding.call(this,this.DOM),setTimeout(this.events.callbacks.onScrollResize.bind(this)))}return i.prototype={defaults:{classname:"",track:!1},build(t){var e={};for(scopeHTML=`<div class='fakeScroll__wrap'>
                                <div class='fakeScroll__content'></div>
                             </div>
                            <div class='fakeScroll__controls container flex items-center gap-24 lg:gap-48'>

                                <div class='fakeScroll__track ${this.settings.classname}'>
                                    <div class='fakeScroll__bar'></div>
                                </div>

                                <div class='fakeScroll__nav flex items-center gap-12'>
                                    <button class='fakeScroll__navigation fakeScroll__prev fa-solid fa-arrow-left'></button>
                                    <button class='fakeScroll__navigation fakeScroll__next fa-solid fa-arrow-right'></button>
                                </div>
                            </div>
                             `,fragment=document.createDocumentFragment();t.childNodes.length;)fragment.appendChild(t.childNodes[0]);return t.insertAdjacentHTML("afterbegin",scopeHTML),e.scope=t,e.scrollWrap=t.querySelector(".fakeScroll__wrap"),e.scrollContent=e.scrollWrap.querySelector(".fakeScroll__content"),e.scrollContent.appendChild(fragment),e.track=t.querySelector(".fakeScroll__track"),e.bar=t.querySelector(".fakeScroll__bar"),e.prev=t.querySelector(".fakeScroll__prev"),e.next=t.querySelector(".fakeScroll__next"),e.items=t.querySelectorAll(".fakeScroll__item"),e.current=0,e.scope.classList.add("fakeScroll"),e},destroy(){this.events.off.call(this,window,"resize","onScrollResize")},get scrollRatio(){return this.state.scrollRatio},events:{on(t,e,s){return e.split(" ").forEach(l=>{s in this.events.callbacks||console.warn(s," doesn't exist in Callbacks: ",this.events.callbacks),this.listeners[l]=this.events.callbacks[s].bind(this),t.addEventListener(l,this.listeners[l])}),this.events},off(t,e,s){return e.split(" ").forEach(l=>t.removeEventListener(l,this.listeners[l])),this.events},binding(t){this.events.on.call(this,t.scrollContent,"scroll","onScrollResize").on.call(this,t.scope,"mouseenter","onScrollResize").on.call(this,t.bar,"mousedown","onBarMouseDown").on.call(this,window,"resize","onScrollResize").on.call(this,t.prev,"click","onPrevClick").on.call(this,t.next,"click","onNextClick"),this.settings.track&&this.events.on.call(this,t.track,"click","onTrackClick")},drag(t){this.events[t].call(this,document,"mousemove","onDrag")[t].call(this,document,"mouseup","onStopDrag")},callbacks:{onScrollResize(){this.moveBar.call(this),this.DOM.scope.classList.toggle("fakeScroll--hasBar",this.state.ratio<1),clearTimeout(this.listeners.timeout__resize),this.listeners.timeout__resize=setTimeout(this.getTrackBounds.bind(this),200)},onDrag(t){var e=t.pageX-this.state.lastPageX;raf(()=>{var s=document.documentElement.scrollLeft,l=t.pageX>=this.state.trackBounds.left+s&&t.pageX<=this.state.trackBounds.right+s;l?this.DOM.scrollContent.scrollLeft=this.state.drag+e/this.state.ratio:(this.state.drag=this.DOM.scrollContent.scrollLeft,this.state.lastPageX=t.pageX)})},onStopDrag(t){[this.DOM.bar,document.body].map(e=>e.classList.remove("fakeScroll--grabbed")),this.events.drag.call(this,"off"),setTimeout(()=>{this.state.drag=!1})},onBarMouseDown(t){this.state.drag=this.DOM.scrollContent.scrollLeft,this.state.lastPageX=t.pageX,[this.DOM.bar,document.body].map(e=>e.classList.add("fakeScroll--grabbed")),this.events.drag.call(this,"on")},onTrackClick(t){if(!this.state.drag){var e=(t.clientX-this.state.trackBounds.left)/(this.state.trackBounds.width-this.state.trackBounds.leftPad-this.state.trackBounds.rightPad),s=this.DOM.scrollContent.scrollWidth,l=this.DOM.scrollWrap.clientWidth,o=e*(s-l);this.settings.track=="smooth"&&(this.DOM.scrollContent.style.scrollBehavior="smooth",setTimeout(()=>{this.DOM.scrollContent.style.scrollBehavior="unset"},500)),this.DOM.scrollContent.scrollLeft=o}},onPrevClick(t){this.scrollNavigation(-1)},onNextClick(t){this.scrollNavigation(1)}}},getTrackBounds(){var t=this.DOM.track.getBoundingClientRect(),e=window.getComputedStyle(this.DOM.track,null);return t.leftPad=parseInt(e.paddingLeft,10),t.rightPad=parseInt(e.paddingRight,10),this.state.trackBounds=t,t},moveBar(){var t=this.DOM.scrollContent,e=t.scrollWidth,s=this.DOM.scrollWrap.clientWidth;this.state.ratio=this.DOM.track.clientWidth/e,this.state.scrollRatio=this.DOM.scrollContent.scrollLeft/(t.scrollWidth-s),raf(()=>{var l=s/e*100,o=t.scrollLeft/e*100;this.DOM.bar.style.cssText=`width  : ${l}%;
                                              left     : ${o}%;
                                              display : ${e<=s?"none":""}`,this.settings.onChange&&this.settings.onChange({scrollRatio:this.state.scrollRatio})})},scrollNavigation(t){var e=this.DOM.current+t,s=t===1?this.DOM.current:this.DOM.current-1;if(this.DOM.items[e]){var l=this.DOM.items[s].offsetWidth,o=24,r=l+o,a=this.DOM.scrollContent.scrollLeft,n=a+r*t;this.DOM.scrollContent.scroll({top:0,left:n,behavior:"smooth"}),this.DOM.current=e}}},Element.prototype.fakeScroll=function(t){return this._fakeScroll=this._fakeScroll||new i(this,t||{}),this._fakeScroll},i});
